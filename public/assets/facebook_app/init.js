var FbQuestions={initialize:function(){$(".unauthenticated").length>0&&($("input, textarea").focus(function(){return Auth.openPopup("/users/auth/facebook"),$(this).blur(),!1}),$(".require_login").click(function(){return Auth.openPopup("/users/auth/facebook"),!1})),$(".markdown a, a[rel=external]").click(function(){var a=$(this).attr("href");return window.open(a),!1}),$("article.Question h3 a").click(function(){var a=$(this),b=a.parents("article.Question");return b.find(".question-body").slideToggle(),!1}),$(".quick_question form").submit(function(){var a=$(this),b=a.find(".step1"),c=a.find(".step2"),d=a.attr("action");return c.is(":visible")?$.ajax({url:d+".js",dataType:"json",type:"POST",data:a.serialize()+"&facebook=1",success:function(a){a.success?(c.slideUp(),Messages.show(a.message,"notice"),$("section.questions-index").prepend(a.html)):(Messages.show(a.message,"error"),a.status=="unauthenticate"&&Auth.openPopup("/users/auth/facebook"))},error:Messages.ajax_error_handler,complete:function(a,b){}}):c.slideDown(),!1}),$("form.new_answer").submit(function(){var a=$(this),b=a.attr("action");return $.ajax({url:b+".js",dataType:"json",type:"POST",data:a.serialize()+"&facebook=1",success:function(a){a.success?(Messages.show(a.message,"notice"),$("article.Question#"+a.question_id+" .answers-list").prepend(a.html)):(Messages.show(a.message,"error"),a.status=="unauthenticate"&&Auth.openPopup("/users/auth/facebook"))},error:Messages.ajax_error_handler,complete:function(a,b){}}),!1}),$("a.follow_question").click(function(){console.lo("!!!");var a=$(this),b=$(this).attr("href");return $.get(b+".js",function(a){Messages.show(a.message,"notice")},"json"),!1})}},FbUsers={initialize:function(){$('a[href^="/users/"]').click(function(a){var b=$(this).attr("href");return b=Utils.append_params(b,"format=js&facebook=1"),$.facebox(function(){$.get(b,function(a,b,c){Utils.log(a),$.facebox(a.html)},"JSON")}),!1})}};$(document).ready(function(){$current_group=$("body").attr("data-group"),FbQuestions.initialize(),FbUsers.initialize()});