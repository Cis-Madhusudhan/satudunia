//forms
(function(a){a.fn.forms=function(b){return this.each(function(){var c=a(this),d=c.data("forms")||{errorCl:"error",emptyCl:"empty",invalidCl:"invalid",notRequiredCl:"notRequired",successCl:"success",successShow:"4000",mailHandlerURL:"bat/MailHandler.php",ownerEmail:"support@guardlex.com",stripHTML:!0,smtpMailServer:"localhost",targets:"input,textarea",controls:"a[data-type=reset],a[data-type=submit]",validate:!0,rx:{".name":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:"input"},".state":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:"input"},".email":{rx:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i,target:"input"},".phone":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:"input"},".fax":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:"input"},".message":{rx:/.{20}/,target:"textarea"}},preFu:function(){d.labels.each(function(){var b=a(this),c=a(d.targets,this),e=c.val(),f=function(){var a=c.is("input")?(a=b.html().match(/value=['"](.+?)['"].+/),!!a&&!!a[1]&&a[1]):c.html();return e==""?e:a}();f!=e&&c.val(e=f||e),b.data({defVal:e}),c.bind("focus",function(){c.val()==e&&(c.val(""),d.hideEmptyFu(b),b.removeClass(d.invalidCl))}).bind("blur",function(){d.validateFu(b),d.isEmpty(b)&&(c.val(e),d.hideErrorFu(b.removeClass(d.invalidCl)))}).bind("keyup",function(){b.hasClass(d.invalidCl)&&d.validateFu(b)}),b.find("."+d.errorCl+",."+d.emptyCl).css({display:"block"}).hide()}),d.success=a("."+d.successCl,d.form).hide()},isRequired:function(a){return!a.hasClass(d.notRequiredCl)},isValid:function(b){var c=!0;return a.each(d.rx,function(a,d){b.is(a)&&(c=d.rx.test(b.find(d.target).val()))}),c},isEmpty:function(a){var b;return(b=a.find(d.targets).val())==""||b==a.data("defVal")},validateFu:function(b){b.each(function(){var b=a(this),c=d.isRequired(b),e=d.isEmpty(b),f=d.isValid(b);e&&c?d.showEmptyFu(b.addClass(d.invalidCl)):d.hideEmptyFu(b.removeClass(d.invalidCl)),e||(f?d.hideErrorFu(b.removeClass(d.invalidCl)):d.showErrorFu(b.addClass(d.invalidCl)))})},getValFromLabel:function(b){var c=a("input,textarea",b).val(),d=b.data("defVal");return b.length?c==d?"nope":c:"nope"},submitFu:function(){d.validateFu(d.labels),d.form.has("."+d.invalidCl).length||a.ajax({type:"POST",url:d.mailHandlerURL,data:{name:d.getValFromLabel(a(".name",d.form)),email:d.getValFromLabel(a(".email",d.form)),phone:d.getValFromLabel(a(".phone",d.form)),fax:d.getValFromLabel(a(".fax",d.form)),state:d.getValFromLabel(a(".state",d.form)),message:d.getValFromLabel(a(".message",d.form)),owner_email:d.ownerEmail,stripHTML:d.stripHTML},success:function(){d.showFu()}})},showFu:function(){d.success.slideDown(function(){setTimeout(function(){d.success.slideUp(),d.form.trigger("reset")},d.successShow)})},controlsFu:function(){a(d.controls,d.form).each(function(){var b=a(this);b.bind("click",function(){return d.form.trigger(b.data("type")),!1})})},showErrorFu:function(a){a.find("."+d.errorCl).slideDown()},hideErrorFu:function(a){a.find("."+d.errorCl).slideUp()},showEmptyFu:function(a){a.find("."+d.emptyCl).slideDown(),d.hideErrorFu(a)},hideEmptyFu:function(a){a.find("."+d.emptyCl).slideUp()},init:function(){d.form=d.me,d.labels=a("label",d.form),d.preFu(),d.controlsFu(),d.form.bind("submit",function(){return d.validate?d.submitFu():d.form[0].submit(),!1}).bind("reset",function(){d.labels.removeClass(d.invalidCl),d.labels.each(function(){var b=a(this);d.hideErrorFu(b),d.hideEmptyFu(b)})}),d.form.trigger("reset")}};d.me||d.init(d.me=c.data({forms:d})),typeof b=="object"&&a.extend(d,b)})}})(jQuery),$(window).load(function(){$("#contact-form").forms({ownerEmail:"#"})});