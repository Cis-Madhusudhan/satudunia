Questions=function(){function b(a){a.hasClass("show")?d(a):a.hasClass("index")?c(a):a.hasClass("new")||a.hasClass("edit")?e(a):a.hasClass("move")&&f(a)}function c(a){Ui.navigateShortcuts($(".questions-index"),".Question"),$(".Question .toolbar").shapadoToolbar(),Votes.initializeOnQuestions();if(Questions.isIndexEmpty()){var b=$(".current_language > a").data("language");b!="any"&&($(".current_language").tipsy({trigger:"manual",gravity:"w"}),$(".current_language").tipsy("show"))}var c=Utils.urlVars();c.format="js",$(".quick_question #ask_question").searcher({url:"/questions/related_questions.js",target:$(".questions-index"),fields:$(".quick_question #ask_question input#question_title"),behaviour:"live",timeout:500,extraParams:c,before_query:function(){$(".quick_question .search-feedback").text("searching questions")},success:function(a){$(".quick_question .search-feedback").text(a.message),$("#additional_info .pagination").html(a.pagination)},after_reset:function(a){$(".quick_question .search-feedback").text("type to search"),$(".content-tabs").show()}}),$(".flag-link-index").live("click",function(a){var b=$(this).parents("article.Question").find("h2 a");return b&&(window.location=b.attr("href")+"#to_flag"),!1})}function d(a){$(".main-question .toolbar").shapadoToolbar({formContainer:"#panel-forms"}),$("article.answer .toolbar").shapadoToolbar({formContainer:".article-forms",afterFetchForm:function(a,b){Editor.setup(b.find(".markdown_editor, .wysiwyg_editor"))}}),$(".answer .toolbar, .comment .toolbar").shapadoToolbar({formContainer:".article-forms",afterFetchForm:function(a,b){Editor.setup(b.find(".markdown_editor, .wysiwyg_editor"))}}),Rewards.initialize(),Editor.initialize(),Votes.initializeOnQuestion(),Comments.initializeOnQuestion(),Answers.initializeOnQuestion(),typeof Jqmath!="undefined"&&Jqmath.initialize();var b=document.location.hash;if(b=="#to_flag"){var c=$("a#flag_question");c.trigger("click"),$("html,body").animate({scrollTop:c.offset().top-100},1e3)}prettyPrint()}function e(a){$("#related_questions").hide(),Editor.initialize(),$("#question_tags").ajaxChosen({method:"GET",url:"/questions/tags_for_autocomplete.js",dataType:"json"},function(a){var b={};return $.each(a,function(a,c){console.log("i: "+a),console.log("val: "+c),b[c.value]=c.caption}),b}),$(".ask_question #ask_question").searcher({url:"/questions/related_questions.js",target:$("#related_questions"),fields:$("form#ask_question input[type=text][name*=question]"),behaviour:"focusout",timeout:2500,extraParams:{format:"js",per_page:5,mini:!0},before_query:function(a){a.show()},success:function(a){a.html||$("#related_questions").hide(),$("label#rqlabel").show()}});var b=$("#attachments #fields"),c=b.find(".template");c.find("input").attr("name","question[attachments[id]]"),c.hide(),$("#attachments #fields .attachment_field .remove_attachment").live("click",function(a){return $(this).parent().remove(),!1}),$(".remove_attachment_link").live("click",function(a){var b=$(this).attr("href"),c=confirm("are you sure?");return c&&$.ajax({url:b,dataType:"json",context:$(this),success:function(a,b,c){$(this).parent().remove()}}),!1});var d=-1;$("#attachments .add_attachment").live("click",function(a){var c=b.find(".template"),e=c.clone();e.removeClass("template"),d++;var f=e.find("input").attr("name").replace(/(id)/,d);return e.find("input").attr("name",f),e.show(),b.append(e),!1})}function f(a){$("#groups_slug").length&&($("#groups_slug").autocomplete({source:"/groups/autocomplete_for_group_slug.json",minLength:1,select:function(a,b){return $("#groups_slug").val(b.item.slug),!1}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append("<a>"+b.slug+"</a>").appendTo(a)})}function g(a){var b=$("section.questions-index");b.prepend(a.html).hide().slideToggle()}function h(a){}function i(a){var b="article.Question#"+a.object_id;for(var c in a.changes)if(c=="title"){var d=a.changes[c].pop();$(b+" h2 a").text(d)}}function j(a){var b="section#question.main-question."+a.object_id;for(var c in a.changes)switch(c){case"title":var d=a.changes[c].pop();$(b+" h1:first").text(d);break;case"body":var d=a.changes[c].pop();$(b+" .description").html(d)}}function k(){var a=$(".empty_questions").length;return a>0}function l(a){}var a=this;return{initialize:b,initializeOnIndex:c,initializeOnShow:d,initializeOnNew:e,initializeOnMove:f,createOnIndex:g,createOnShow:h,updateOnIndex:i,updateOnShow:j,isIndexEmpty:k,updateWidgets:l}}();