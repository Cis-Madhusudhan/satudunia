(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};(function(b){return b.fn.ajaxChosen=function(c,d){var e,f,g,h;return e={minLength:3,queryParameter:"term",queryLimit:10,data:{},chosenOptions:{},searchingText:"Searching...",noresultsText:"No results."},b.extend(e,c),e.success&&(e.userSuppliedSuccess=e.success),e.chosenOptions.no_results_text=e.searchingText,g=this.attr("multiple")!=null,g?f=".search-field > input":f=".chzn-search > input",h=this,this.chosen(e.chosenOptions),this.next(".chzn-container").find(f).bind("keyup",function(c){var f;return this.previousSearch&&clearTimeout(this.previousSearch),f=a(function(){var c,f,i,j,k,l;return k=b.trim(b(this).attr("value")),j=(l=b(this).data("prevVal"))!=null?l:"",b(this).data("prevVal",k),i=b(this),c=a(function(){var a;return g?a=i.parent().parent().siblings():a=i.parent().parent(),a.find(".no-results").html(e.noresultsText+" '"+b(this).attr("value")+"'")},this),k.length<e.minLength||k===j?(c(),!1):(f=h.find("option"),f.length<e.queryLimit&&k.indexOf(j)===0&&j!==""?(c(),!1):(e.data[e.queryParameter]=k,e.success=function(a){var c,j,k,l,m,n,o,p,q,r,s,t,u;if(!i.is(":focus"))return;j=d(a),n=[],b.each(j,function(a,c){var d;return d=b("<option>"),d.attr("value",a).html(c),n.push(b(d))}),p=function(a){var c,d,e;c=b(a);if(c.attr("selected")&&g)return;if(c.attr("value")===""&&c.html()===""&&!g)return;e=function(){var a,b,e;e=[];for(a=0,b=n.length;a<b;a++)d=n[a],d.attr("value")===c.attr("value")&&e.push(d);return e}();if(e.length===0)return c.remove()};for(r=0,t=f.length;r<t;r++)c=f[r],p(c);f=h.find("option"),q=function(a){var c,d,e,g,i;d=!1,e=function(c){if(b(c).attr("value")===a.attr("value"))return d=!0};for(g=0,i=f.length;g<i;g++)c=f[g],e(c);if(!d)return h.append(a)};for(s=0,u=n.length;s<u;s++)m=n[s],q(m);l=i.val(),b.isEmptyObject(a)?(o=b("<option>"),o.addClass("no-results"),o.html(e.noresultsText+" '"+l+"'").attr("value",""),h.append(o)):h.change(),h.trigger("liszt:updated"),b(".no-results").removeClass("active-result"),i.val(l),b.isEmptyObject(a)||(k=b.Event("keydown"),k.which=40,i.trigger(k));if(e.userSuppliedSuccess)return e.userSuppliedSuccess(a)},b.ajax(e)))},this),this.previousSearch=setTimeout(f,100)})}})(jQuery)}).call(this);