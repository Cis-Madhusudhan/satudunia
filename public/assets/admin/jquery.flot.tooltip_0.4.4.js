/*
 * jquery.flot.tooltip
 *
 * desc:	create tooltip with values of hovered point on the graph, 
			support many series, time mode, stacking
			you can set custom tip content (also with use of HTML tags) and precision of values
 * version:	0.4.4
 * author: 	Krzysztof Urbas @krzysu [myviews.pl]
 * modify:  SKELETON9@9#, https://github.com/skeleton9/flot.tooltip
 * website:	https://github.com/krzysu/flot.tooltip
 * 
 * released under MIT License, 2012
*/
(function(a){var b={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y.2",dateFormat:"%y-%0m-%0d",shifts:{x:10,y:20},defaultTheme:!0,labelRegex:null}},c=function(b){function m(a,b,c,d){f||(f=!0,g=n(a.getData()));var e=c.length;b.percents=[];for(var h=0;h<e;h++){var i=g[c[h][0]+""];i>0&&b.percents.push(c[h][1]*100/i)}}function n(a){var b=a.length,c={};if(b>0)for(var d=0;d<b;d++){a[d].percents=[];var e=a[d].data.length;for(var f=0;f<e;f++)c[a[d].data[f][0]+""]?c[a[d].data[f][0]+""]+=a[d].data[f][1]:c[a[d].data[f][0]+""]=a[d].data[f][1]}return c}var c=null,d={x:0,y:0},e=b.getOptions(),f=!1,g={},h=function(a){d.x=a.x,d.y=a.y},i=function(a){var b={x:0,y:0};b.x=a.pageX,b.y=a.pageY,h(b)},j=function(b){var c=new Date(b);return a.plot.formatDate(c,e.tooltipOpts.dateFormat)};b.hooks.processOptions.push(function(a,b){b.tooltipOpts.labelRegex&&(c=b.tooltipOpts.labelRegex),b.series.stack&&a.hooks.processRawData.push(m)}),b.hooks.bindEvents.push(function(b,c){var f=e.tooltipOpts,g=b.getPlaceholder(),h;if(e.tooltip===!1)return;a("#flotTip").length>0?h=a("#flotTip"):(h=a("<div />").attr("id","flotTip"),h.appendTo("body").hide().css({position:"absolute"}),f.defaultTheme&&h.css({background:"rgba(0, 0, 0, .87)","z-index":"10000",padding:"0.4em 0.6em","border-radius":"2px","font-size":"11px",border:"0px solid transparent","text-shadow":"0 1px black;",color:"#fff"})),a(g).bind("plothover",function(a,b,c){if(c){var g;e.xaxis.mode==="time"||e.xaxes[0].mode==="time"?g=k(f.content,c,j):g=k(f.content,c),h.html(g).css({left:d.x+f.shifts.x,top:d.y+f.shifts.y}).show()}else h.hide().html("")}),c.mousemove(i)});var k=function(a,b,d){var e=/%s/,f=/%x\.{0,1}(\d{0,})/,g=/%y\.{0,1}(\d{0,})/,h=/%p\.{0,1}(\d{0,})/;if(typeof b.series.label!="undefined"){var i=b.series.label;c&&(i=i.match(c)[0]),a=a.replace(e,i)}return typeof d=="function"?a=a.replace(f,d(b.series.data[b.dataIndex][0])):a=l(f,a,b.series.data[b.dataIndex][0]),a=l(g,a,b.series.data[b.dataIndex][1]),b.series.percent?a=l(h,a,b.series.percent):b.series.percents&&(a=l(h,a,b.series.percents[b.dataIndex])),a},l=function(a,b,c){var d;return b.match(a)!=="null"&&(RegExp.$1!==""&&(d=RegExp.$1,c=c.toFixed(d)),b=b.replace(a,c)),b}};a.plot.plugins.push({init:c,options:b,name:"tooltip",version:"0.4.4"})})(jQuery);