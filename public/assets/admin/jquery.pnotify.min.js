/*
 * jQuery Pines Notify (pnotify) Plugin 1.2.0
 *
 * http://pinesframework.org/pnotify/
 * Copyright (c) 2009-2012 Hunter Perrin
 *
 * Triple license under the GPL, LGPL, and MPL:
 *	  http://www.gnu.org/licenses/gpl.html
 *	  http://www.gnu.org/licenses/lgpl.html
 *	  http://www.mozilla.org/MPL/MPL-1.1.html
 */
(function(a){var b,c,d,e=a(window),f={jqueryui:{container:"ui-widget ui-widget-content ui-corner-all",notice:"ui-state-highlight",notice_icon:"ui-icon ui-icon-info",info:"",info_icon:"ui-icon ui-icon-info",success:"ui-state-default",success_icon:"ui-icon ui-icon-circle-check",error:"ui-state-error",error_icon:"ui-icon ui-icon-alert",closer:"ui-icon ui-icon-close",pin_up:"ui-icon ui-icon-pin-w",pin_down:"ui-icon ui-icon-pin-s",hi_menu:"ui-state-default ui-corner-bottom",hi_btn:"ui-state-default ui-corner-all",hi_btnhov:"ui-state-hover",hi_hnd:"ui-icon ui-icon-grip-dotted-horizontal"},bootstrap:{container:"alert",notice:"",notice_icon:"icon-exclamation-sign",info:"alert-info",info_icon:"icon-info-sign",success:"alert-success",success_icon:"icon-ok-sign",error:"alert-error",error_icon:"icon-warning-sign",closer:"icon-remove",pin_up:"icon-pause",pin_down:"icon-play",hi_menu:"well",hi_btn:"btn",hi_btnhov:"",hi_hnd:"icon-chevron-down"}},g=function(){d=a("body"),e=a(window),e.bind("resize",function(){c&&clearTimeout(c),c=setTimeout(a.pnotify_position_all,10)})};document.body?g():a(g),a.extend({pnotify_remove_all:function(){var b=e.data("pnotify");b&&b.length&&a.each(b,function(){this.pnotify_remove&&this.pnotify_remove()})},pnotify_position_all:function(){c&&clearTimeout(c),c=null;var b=e.data("pnotify");b&&b.length&&(a.each(b,function(){var a=this.opts.stack;a&&(a.nextpos1=a.firstpos1,a.nextpos2=a.firstpos2,a.addpos2=0,a.animation=!0)}),a.each(b,function(){this.pnotify_position()}))},pnotify:function(g){var h,i;typeof g!="object"?(i=a.extend({},a.pnotify.defaults),i.text=g):i=a.extend({},a.pnotify.defaults,g);for(var j in i)typeof j=="string"&&j.match(/^pnotify_/)&&(i[j.replace(/^pnotify_/,"")]=i[j]);if(i.before_init&&i.before_init(i)===!1)return null;var k,m=function(b,c){p.css("display","none");var d=document.elementFromPoint(b.clientX,b.clientY);p.css("display","block");var e=a(d),f=e.css("cursor");p.css("cursor",f!="auto"?f:"default");if(!k||k.get(0)!=d)k&&(l.call(k.get(0),"mouseleave",b.originalEvent),l.call(k.get(0),"mouseout",b.originalEvent)),l.call(d,"mouseenter",b.originalEvent),l.call(d,"mouseover",b.originalEvent);l.call(d,c,b.originalEvent),k=e},o=f[i.styling],p=a("<div />",{"class":"ui-pnotify "+i.addclass,css:{display:"none"},mouseenter:function(a){i.nonblock&&a.stopPropagation(),i.mouse_reset&&h=="out"&&(p.stop(!0),h="in",p.css("height","auto").animate({width:i.width,opacity:i.nonblock?i.nonblock_opacity:i.opacity},"fast")),i.nonblock&&p.animate({opacity:i.nonblock_opacity},"fast"),i.hide&&i.mouse_reset&&p.pnotify_cancel_remove(),i.sticker&&!i.nonblock&&p.sticker.trigger("pnotify_icon").css("visibility","visible"),i.closer&&!i.nonblock&&p.closer.css("visibility","visible")},mouseleave:function(b){i.nonblock&&b.stopPropagation(),k=null,p.css("cursor","auto"),i.nonblock&&h!="out"&&p.animate({opacity:i.opacity},"fast"),i.hide&&i.mouse_reset&&p.pnotify_queue_remove(),i.sticker_hover&&p.sticker.css("visibility","hidden"),i.closer_hover&&p.closer.css("visibility","hidden"),a.pnotify_position_all()},mouseover:function(a){i.nonblock&&a.stopPropagation()},mouseout:function(a){i.nonblock&&a.stopPropagation()},mousemove:function(a){i.nonblock&&(a.stopPropagation(),m(a,"onmousemove"))},mousedown:function(a){i.nonblock&&(a.stopPropagation(),a.preventDefault(),m(a,"onmousedown"))},mouseup:function(a){i.nonblock&&(a.stopPropagation(),a.preventDefault(),m(a,"onmouseup"))},click:function(a){i.nonblock&&(a.stopPropagation(),m(a,"onclick"))},dblclick:function(a){i.nonblock&&(a.stopPropagation(),m(a,"ondblclick"))}});p.opts=i,p.container=a("<div />",{"class":o.container+" ui-pnotify-container "+(i.type=="error"?o.error:i.type=="info"?o.info:i.type=="success"?o.success:o.notice)}).appendTo(p),i.cornerclass!=""&&p.container.removeClass("ui-corner-all").addClass(i.cornerclass),i.shadow&&p.container.addClass("ui-pnotify-shadow"),p.pnotify_version="1.2.0",p.pnotify=function(b){var c=i;typeof b=="string"?i.text=b:i=a.extend({},i,b);for(var d in i)typeof d=="string"&&d.match(/^pnotify_/)&&(i[d.replace(/^pnotify_/,"")]=i[d]);p.opts=i,i.cornerclass!=c.cornerclass&&p.container.removeClass("ui-corner-all").addClass(i.cornerclass),i.shadow!=c.shadow&&(i.shadow?p.container.addClass("ui-pnotify-shadow"):p.container.removeClass("ui-pnotify-shadow")),i.addclass===!1?p.removeClass(c.addclass):i.addclass!==c.addclass&&p.removeClass(c.addclass).addClass(i.addclass),i.title===!1?p.title_container.slideUp("fast"):i.title!==c.title&&(i.title_escape?p.title_container.text(i.title).slideDown(200):p.title_container.html(i.title).slideDown(200)),i.text===!1?p.text_container.slideUp("fast"):i.text!==c.text&&(i.text_escape?p.text_container.text(i.text).slideDown(200):p.text_container.html(i.insert_brs?String(i.text).replace(/\n/g,"<br />"):i.text).slideDown(200)),p.pnotify_history=i.history,p.pnotify_hide=i.hide,i.type!=c.type&&p.container.removeClass(o.error+" "+o.notice+" "+o.success+" "+o.info).addClass(i.type=="error"?o.error:i.type=="info"?o.info:i.type=="success"?o.success:o.notice);if(i.icon!==c.icon||i.icon===!0&&i.type!=c.type)p.container.find("div.ui-pnotify-icon").remove(),i.icon!==!1&&a("<div />",{"class":"ui-pnotify-icon"}).append(a("<span />",{"class":i.icon===!0?i.type=="error"?o.error_icon:i.type=="info"?o.info_icon:i.type=="success"?o.success_icon:o.notice_icon:i.icon})).prependTo(p.container);return i.width!==c.width&&p.animate({width:i.width}),i.min_height!==c.min_height&&p.container.animate({minHeight:i.min_height}),i.opacity!==c.opacity&&p.fadeTo(i.animate_speed,i.opacity),!i.closer||i.nonblock?p.closer.css("display","none"):p.closer.css("display","block"),!i.sticker||i.nonblock?p.sticker.css("display","none"):p.sticker.css("display","block"),p.sticker.trigger("pnotify_icon"),i.sticker_hover?p.sticker.css("visibility","hidden"):i.nonblock||p.sticker.css("visibility","visible"),i.closer_hover?p.closer.css("visibility","hidden"):i.nonblock||p.closer.css("visibility","visible"),i.hide?c.hide||p.pnotify_queue_remove():p.pnotify_cancel_remove(),p.pnotify_queue_position(),p},p.pnotify_position=function(a){var b=p.opts.stack;if(b){b.nextpos1||(b.nextpos1=b.firstpos1),b.nextpos2||(b.nextpos2=b.firstpos2),b.addpos2||(b.addpos2=0);var c=p.css("display")=="none";if(!c||a){var d,f={},g;switch(b.dir1){case"down":g="top";break;case"up":g="bottom";break;case"left":g="right";break;case"right":g="left"}a=parseInt(p.css(g)),isNaN(a)&&(a=0),typeof b.firstpos1=="undefined"&&!c&&(b.firstpos1=a,b.nextpos1=b.firstpos1);var h;switch(b.dir2){case"down":h="top";break;case"up":h="bottom";break;case"left":h="right";break;case"right":h="left"}d=parseInt(p.css(h)),isNaN(d)&&(d=0),typeof b.firstpos2=="undefined"&&!c&&(b.firstpos2=d,b.nextpos2=b.firstpos2);if(b.dir1=="down"&&b.nextpos1+p.height()>e.height()||b.dir1=="up"&&b.nextpos1+p.height()>e.height()||b.dir1=="left"&&b.nextpos1+p.width()>e.width()||b.dir1=="right"&&b.nextpos1+p.width()>e.width())b.nextpos1=b.firstpos1,b.nextpos2+=b.addpos2+(typeof b.spacing2=="undefined"?25:b.spacing2),b.addpos2=0;if(b.animation&&b.nextpos2<d)switch(b.dir2){case"down":f.top=b.nextpos2+"px";break;case"up":f.bottom=b.nextpos2+"px";break;case"left":f.right=b.nextpos2+"px";break;case"right":f.left=b.nextpos2+"px"}else p.css(h,b.nextpos2+"px");switch(b.dir2){case"down":case"up":p.outerHeight(!0)>b.addpos2&&(b.addpos2=p.height());break;case"left":case"right":p.outerWidth(!0)>b.addpos2&&(b.addpos2=p.width())}if(b.nextpos1)if(b.animation&&(a>b.nextpos1||f.top||f.bottom||f.right||f.left))switch(b.dir1){case"down":f.top=b.nextpos1+"px";break;case"up":f.bottom=b.nextpos1+"px";break;case"left":f.right=b.nextpos1+"px";break;case"right":f.left=b.nextpos1+"px"}else p.css(g,b.nextpos1+"px");(f.top||f.bottom||f.right||f.left)&&p.animate(f,{duration:500,queue:!1});switch(b.dir1){case"down":case"up":b.nextpos1+=p.height()+(typeof b.spacing1=="undefined"?25:b.spacing1);break;case"left":case"right":b.nextpos1+=p.width()+(typeof b.spacing1=="undefined"?25:b.spacing1)}}}},p.pnotify_queue_position=function(b){c&&clearTimeout(c),b||(b=10),c=setTimeout(a.pnotify_position_all,b)},p.pnotify_display=function(){p.parent().length||p.appendTo(d),i.before_open&&i.before_open(p)===!1||(i.stack.push!="top"&&p.pnotify_position(!0),i.animation=="fade"||i.animation.effect_in=="fade"?p.show().fadeTo(0,0).hide():i.opacity!=1&&p.show().fadeTo(0,i.opacity).hide(),p.animate_in(function(){i.after_open&&i.after_open(p),p.pnotify_queue_position(),i.hide&&p.pnotify_queue_remove()}))},p.pnotify_remove=function(){p.timer&&(window.clearTimeout(p.timer),p.timer=null),i.before_close&&i.before_close(p)===!1||p.animate_out(function(){i.after_close&&i.after_close(p)===!1||(p.pnotify_queue_position(),i.remove&&p.detach())})},p.animate_in=function(a){h="in";var b;b=typeof i.animation.effect_in!="undefined"?i.animation.effect_in:i.animation,b=="none"?(p.show(),a()):b=="show"?p.show(i.animate_speed,a):b=="fade"?p.show().fadeTo(i.animate_speed,i.opacity,a):b=="slide"?p.slideDown(i.animate_speed,a):typeof b=="function"?b("in",a,p):p.show(b,typeof i.animation.options_in=="object"?i.animation.options_in:{},i.animate_speed,a)},p.animate_out=function(a){h="out";var b;b=typeof i.animation.effect_out!="undefined"?i.animation.effect_out:i.animation,b=="none"?(p.hide(),a()):b=="show"?p.hide(i.animate_speed,a):b=="fade"?p.fadeOut(i.animate_speed,a):b=="slide"?p.slideUp(i.animate_speed,a):typeof b=="function"?b("out",a,p):p.hide(b,typeof i.animation.options_out=="object"?i.animation.options_out:{},i.animate_speed,a)},p.pnotify_cancel_remove=function(){p.timer&&window.clearTimeout(p.timer)},p.pnotify_queue_remove=function(){p.pnotify_cancel_remove(),p.timer=window.setTimeout(function(){p.pnotify_remove()},isNaN(i.delay)?0:i.delay)},p.closer=a("<div />",{"class":"ui-pnotify-closer",css:{cursor:"pointer",visibility:i.closer_hover?"hidden":"visible"},click:function(){p.pnotify_remove(),p.sticker.css("visibility","hidden"),p.closer.css("visibility","hidden")}}).append(a("<span />",{"class":o.closer})).appendTo(p.container),(!i.closer||i.nonblock)&&p.closer.css("display","none"),p.sticker=a("<div />",{"class":"ui-pnotify-sticker",css:{cursor:"pointer",visibility:i.sticker_hover?"hidden":"visible"},click:function(){i.hide=!i.hide,i.hide?p.pnotify_queue_remove():p.pnotify_cancel_remove(),a(this).trigger("pnotify_icon")}}).bind("pnotify_icon",function(){a(this).children().removeClass(o.pin_up+" "+o.pin_down).addClass(i.hide?o.pin_up:o.pin_down)}).append(a("<span />",{"class":o.pin_up})).appendTo(p.container),(!i.sticker||i.nonblock)&&p.sticker.css("display","none"),i.icon!==!1&&a("<div />",{"class":"ui-pnotify-icon"}).append(a("<span />",{"class":i.icon===!0?i.type=="error"?o.error_icon:i.type=="info"?o.info_icon:i.type=="success"?o.success_icon:o.notice_icon:i.icon})).prependTo(p.container),p.title_container=a("<h4 />",{"class":"ui-pnotify-title"}).appendTo(p.container),i.title===!1?p.title_container.hide():i.title_escape?p.title_container.text(i.title):p.title_container.html(i.title),p.text_container=a("<div />",{"class":"ui-pnotify-text"}).appendTo(p.container),i.text===!1?p.text_container.hide():i.text_escape?p.text_container.text(i.text):p.text_container.html(i.insert_brs?String(i.text).replace(/\n/g,"<br />"):i.text),typeof i.width=="string"&&p.css("width",i.width),typeof i.min_height=="string"&&p.container.css("min-height",i.min_height),p.pnotify_history=i.history,p.pnotify_hide=i.hide;var s=e.data("pnotify");if(s==null||typeof s!="object")s=[];s=i.stack.push=="top"?a.merge([p],s):a.merge(s,[p]),e.data("pnotify",s),i.stack.push=="top"&&p.pnotify_queue_position(1),i.after_init&&i.after_init(p);if(i.history){var t=e.data("pnotify_history");typeof t=="undefined"&&(t=a("<div />",{"class":"ui-pnotify-history-container "+o.hi_menu,mouseleave:function(){t.animate({top:"-"+b+"px"},{duration:100,queue:!1})}}).append(a("<div />",{"class":"ui-pnotify-history-header",text:"Redisplay"})).append(a("<button />",{"class":"ui-pnotify-history-all "+o.hi_btn,text:"All",mouseenter:function(){a(this).addClass(o.hi_btnhov)},mouseleave:function(){a(this).removeClass(o.hi_btnhov)},click:function(){return a.each(s,function(){this.pnotify_history&&(this.is(":visible")?this.pnotify_hide&&this.pnotify_queue_remove():this.pnotify_display&&this.pnotify_display())}),!1}})).append(a("<button />",{"class":"ui-pnotify-history-last "+o.hi_btn,text:"Last",mouseenter:function(){a(this).addClass(o.hi_btnhov)},mouseleave:function(){a(this).removeClass(o.hi_btnhov)},click:function(){var a=-1,b;do{b=a==-1?s.slice(a):s.slice(a,a+1);if(!b[0])break;a--}while(!b[0].pnotify_history||b[0].is(":visible"));return b[0]?(b[0].pnotify_display&&b[0].pnotify_display(),!1):!1}})).appendTo(d),b=a("<span />",{"class":"ui-pnotify-history-pulldown "+o.hi_hnd,mouseenter:function(){t.animate({top:"0"},{duration:100,queue:!1})}}).appendTo(t).offset().top+2,t.css({top:"-"+b+"px"}),e.data("pnotify_history",t))}return i.stack.animation=!1,p.pnotify_display(),p}});var h=/^on/,i=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/,j=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/,k=/^(scroll|resize|(un)?load|abort|error)$/,l=function(b,c){var d,b=b.toLowerCase();document.createEvent&&this.dispatchEvent?(b=b.replace(h,""),b.match(i)?(a(this).offset(),d=document.createEvent("MouseEvents"),d.initMouseEvent(b,c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)):b.match(j)?(d=document.createEvent("UIEvents"),d.initUIEvent(b,c.bubbles,c.cancelable,c.view,c.detail)):b.match(k)&&(d=document.createEvent("HTMLEvents"),d.initEvent(b,c.bubbles,c.cancelable)),d&&this.dispatchEvent(d)):(b.match(h)||(b="on"+b),d=document.createEventObject(c),this.fireEvent(b,d))};a.pnotify.defaults={title:!1,title_escape:!1,text:!1,text_escape:!1,styling:"bootstrap",addclass:"",cornerclass:"",nonblock:!1,nonblock_opacity:.2,history:!0,width:"300px",min_height:"16px",type:"notice",icon:!0,animation:"fade",animate_speed:"slow",opacity:1,shadow:!0,closer:!0,closer_hover:!0,sticker:!0,sticker_hover:!0,hide:!0,delay:8e3,mouse_reset:!0,remove:!0,insert_brs:!0,stack:{dir1:"down",dir2:"left",push:"bottom",spacing1:25,spacing2:25}}})(jQuery);