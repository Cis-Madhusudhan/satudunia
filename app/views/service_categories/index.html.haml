.row-fluid
  .span8
    .box.gradient
      .title
        %h4
          %span
            Service Categories
        = link_to "Minimize", "#", :class => "minimize"
      .content.noPad.clearfix
        %table{:cellpadding=>0,:cellspacing=>0,:border=>0,:class=>"responsive dynamicTable display table table-bordered",:width=>"100%"}
          %thead
            %tr
              %th
                Category Name
              %th
                Number of Service Providers
              %th
                Action
          %tbody
            -@service_categories.each_with_index do |category|
              = render :partial => "category", :object => category
  .span4
    .box
      .title
        %h4
          Controls
        = link_to "Minimize", "#", :class => "minimize"
      .content
        .center
          = link_to "New Category", "#", :class => "btn marginR10 marginB10", :id => "openModalDialog", :style => "padding: 4px 10px !important; border-width: 1px !important; border-style: solid !important"
          = link_to "New Service Provider", "#", :class => "btn marginR10 marginB10", :id => "openDialog", :style => "padding: 4px 10px !important; border-width: 1px !important; border-style: solid !important"

        .dialog{:id => "dialog", :title => "New Service Provider"}
          = form_for @provider, :html => {:class => "form", :method => :post} do |form|
            .form-row.row-fluid
              .span12
                .row-fluid
                  = form.label "Name", :class => "form-label span4"
                  = form.text_field :name, :class => "span8"
            .form-row.row-fluid
              .span12
                .row-fluid
                  = form.label "Description", :class => "form-label span4"
                  = form.text_area :description, :class => "span8"
            .form-row.row-fluid
              .span12
                .row-fluid
                  = form.label "Address", :class => "form-label span4"
                  = form.text_field :address, :class => "span8"
            .form-row.row-fluid
              .span12
                .row-fluid
                  = form.label "Country", :class => "form-label span4"
                  = form.text_field :country, :class => "span8"
            .form-row.row-fluid
              .span12
                .row-fluid
                  = form.label "Telephone", :class => "form-label span4"
                  = form.text_field :telephone, :class => "span8"
            .form-row.row-fluid
              .span12
                .row-fluid
                  = form.label "Website", :class => "form-label span4"
                  = form.text_field :url, :class => "span8"
            .form-row.row-fluid
              .span12
                .row-fluid
                  = form.label "Email", :class => "form-label span4"
                  = form.text_field :email, :class => "span8"
            .form-row.row-fluid
              .span12
                .row-fluid
                  = form.label "Category", :class => "form-label span4"
                  = form.select :service_category_id, options_from_collection_for_select(@service_categories, :id, :category_name, @provider.service_category_id), :class => "span8"
            .form-row.row-fluid
              .span12
                .row-fluid
                  .span4
                    &nbsp;
                  = form.submit "Save", :class => "btn nostyle span2", :style => "padding: 4px 10px !important; border-width: 1px !important; border-style: solid !important"


        .dialog{:id => "modal", :title => "New Category"}
          = form_tag service_categories_path, :class => "form", :id => "filter_members", :method => "post" do
            .form-row.row-fluid
              .span12
                .row-fluid
                  = label_tag :q, "Category Name *", :class => "form-label span4"
                  = text_field_tag "category_name", params[:category_name], :class => "span8"
            .form-row.row-fluid
              .span12
                .row-fluid   
                  .span4
                    &nbsp;   
                  = submit_tag("create", :class => "btn nostyle span2", :style => "padding: 4px 10px !important; border-width: 1px !important; border-style: solid !important")

.row-fluid
  .span12
    .box.gradient
      .title
        %h4
          %span
            Service Providers
        = link_to "Minimize", "#", :class => "minimize"
      .content.noPad.clearfix
        %table{:cellpadding=>0,:cellspacing=>0,:border=>0,:class=>"responsive dynamicTable display table table-bordered",:width=>"100%"}
          %thead
            %tr
              %th
                Name
              %th{:width => "30%"}
                Description
              %th{:width => "20%"}
                Address
              %th
                Country
              %th
                Telephone
              %th
                Website
              %th
                Email
              %th 
                Category
              %th{:width => "5%"}
                Action
          %tbody
            -@providers.each_with_index do |provider|
              = render :partial => "providers/provider", :object => provider

%script
  $(document).ready(function(){
  //--------------- Dialogs ------------------//
  $('#openDialog').click(function(){
  $('#dialog').dialog('open');
  return false;
  });

  $('#openModalDialog').click(function(){
  $('#modal').dialog('open');
  return false;
  });

  // JQuery Dialog            
  $('#dialog').dialog({
  autoOpen: false,
  modal: true,
  dialogClass: 'dialog',
  buttons: {
  "Close": function() { 
  $(this).dialog("close"); 
  }
  }
  });

  // JQuery UI Modal Dialog           
  $('#modal').dialog({
  autoOpen: false,
  modal: true,
  dialogClass: 'dialog',
  buttons: {
  "Close": function() { 
  $(this).dialog("close"); 
  }
  }
  });

  - @service_categories.each do |category|
    $('#openDialog#{category.id}').click(function(){
    $('#dialog#{category.id}').dialog('open');
    return false;
    });

    $('#dialog#{category.id}').dialog({
    autoOpen: false,
    modal: true,
    dialogClass: 'dialog',
    buttons: {
    "Close": function() { 
    $(this).dialog("close"); 
    }
    }
    });

  - @providers.each do |provider|
    $('#openDialog#{provider.id}').click(function(){
    $('#dialog#{provider.id}').dialog('open');
    return false;
    });

    $('#dialog#{provider.id}').dialog({
    autoOpen: false,
    modal: true,
    dialogClass: 'dialog',
    buttons: {
    "Close": function() { 
    $(this).dialog("close"); 
    }
    }
    });

  $("div.dialog button").addClass("btn");
  });
